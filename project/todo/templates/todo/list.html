{% extends "todo/base.html" %}

{% block title %}リスト{% endblock title %}

{% block content %}

<div class="jumbotron">
    <p>{{listdata.title}}</p>

    <form method = "post">
    {% csrf_token %}
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">新しいToDoを作成する</h5>
                    <div class = "row">
                        <div class = "col-10">
                            <div class = "row">
                                <p>ToDo名</p>
                                {{form.title}}
                            </div>
                            <div class = "row">
                                <p>期限</p>
                                {{form.deadline_date}}
                            </div>
                            <div class = "row">
                                <p>メモ</p>
                                {{form.text}}
                            </div>
                        </div>
                        <div class = "col-2">
                            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" name="submit">ToDoの追加</button>
                        </div>
                    </div>
            </div>
        </div>
    </form>

    {% if not taskdata %}
        <p>登録されたToDoはございません</p>
    {% else %}
        {% for i in taskdata %}
        <div class="card">
            <h5 class="card-header">{{i.title}}</h5>
            <div class="card-body">
                <div class = "row">
                    <div class = "col-10">
                        <p class="card-text">期限:{{i.deadline_date}}</p>
                        <p class="card-text">作成日:{{i.create_date}}</p>
                        <p class="card-text">{{i.text}}</p>
                    </div>
                    <div class = "col-2">
                        <form method = "post">
                        {% csrf_token %}
                            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" name={{i.id}}>
                                {% if i.completed %}
                                    完了
                                {% else %}
                                    未完了
                                {% endif %}
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    {% endif %}



</div>

{% endblock %}